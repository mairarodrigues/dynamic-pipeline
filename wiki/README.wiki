#summary Instructions for running the dynamic pipeline algorithm.
#labels Featured,Phase-Deploy

= Introduction =

To run the dynamic pipeline project you need: (1) the dynamic pipeline directory structure provided as a .tar file, which includes the dynamic pipeline algorithm (`SetPipeline.class`), the available pipelines algorithm (`AvailablePipelines.class`) and the program to calculate the tools' performance measure (`CalculatePerformance.class`), all written in Java ; (2) a set of tools to be part of the pipeline system, stored in the folder "tools/"; and (3) the tool registry file (`registry/ToolRegistry.txt`) instantiated with information about the tools in "tools/". If you want to access your dynamic pipeline system through a web interface, we provide a sample interface program written in PHP (index.php). Requirements for using the dynamic pipeline project are below. 

= Requirements for the Java Algorithm =

  * Library jgrapht-0.8.1  (provided along with the project files)

  * Directory hierarchy (creation required beforehand):

  dynamicpipeline/java/

  dynamicpipeline/java/jgrapht-0.8.1/  

  dynamicpipeline/registry/

  dynamicpipeline/tools/

  All with read+exec permissions

  * Directory hierarchy (created on execution):
  dynamicpipeline/inputs/
  dynamicpipeline/pipelines/  
  
  All with read+exec+write permissions

  * Complementary files:
  !ToolRegistry.txt (on dynamicpipeline/registry/)
 
  With read+exec+write permission


*ATENTION:* before running the java programs you must 
 # populate the folder "tools/" with the tools you want to include in your pipeline system; and 
 # instantiate the Tool Registry (`registry/ToolRegistry.txt`) with information about those tools. Read the document on the Wiki section about how to incorporate your tools.

= How to Run the Java Executables =

Java executables should be run from the "dynamicpipeline/java/" directory. 
 * linux:   
{{{
java -cp ":/xxx/dynamicpipeline/java/jgrapht-0.8.1/jgrapht-jdk1.6.jar:/xxx/dynamicpipeline/java/" SetPipeline <arguments>
}}}
 * windows: 
{{{
java -cp xxx\dynamicpipeline\java\jgrapht-0.8.1\jgrapht-jdk1.6.jar;xxx\dynamicpipeline\java\ SetPipeline <arguments>
}}}

Where "xxx" is the absolute path on your machine. Use the same command for classes `AvailablePipelines` and `CalculatePerformance`.


= Requirements for the PHP Interface =

  * Configure index.php javaclasspath according to your operating system:
{{{
  "$path/jgrapht-0.8.1/jgrapht-jdk1.6.jar:$path"
}}}
Substitute ":" by ";" if you are using Windows. For Linux, no change is needed.


= Outputs =

The `SetPipeline` class returns the path for four output files, in this order:
{{{
pipeline<timestamp>.inputs
pipeline<timestamp>.exec
pipeline<timestamp>.outputs
pipeline<timestamp>.err
}}}
OR

There is no available path.

These files are stored in the folder "pipelines/".
It also generates two other output files and creates a pipeline-specific folder inside the folder "pipelines/":
{{{
pipeline<timestamp>.txt
pipeline<timestamp>.log
<timestamp>/
}}}
The `AvailablePipelines` class returns a comma-delimited String of possible end points with available paths from a specific start point (or input_format). Example of output, referring to possible conversion formats for the start point format SDAT:
{{{
PrettyBase,SDAT,PHASE_Format,NEXUS,Structure_Format,R_Genetics,R_Hierfstat
}}}

The `CalculatePerformance` class returns a number that represents the performance measure. 